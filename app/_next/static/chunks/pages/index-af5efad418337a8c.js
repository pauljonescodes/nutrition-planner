(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{49536:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(7412)}])},7412:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var n=a(24246),i=a(83401),s=a(45026),l=a(57997),r=a(17752),o=a(77255),d=a(78027),c=a(54571),u=a(61320),h=a.n(u),x=a(27378),f=a(56281),v=a(93627),m=a(29738),w=a(29946),j=a(86411),y=a(17020);let g=e=>{let t=new Date;return e.getDate()==t.getDate()&&e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear()},b=e=>(0,n.jsxs)(i.Ug,{children:[(0,n.jsxs)(j.hE,{isAttached:!0,pb:3,pt:3,width:{base:"full",sm:"initial"},children:[(0,n.jsx)(j.hU,{onClick:()=>e.onNavigate("PREV"),icon:(0,n.jsx)(w.Rp,{}),"aria-label":"Back",variant:"outline",flexGrow:{base:1,sm:"initial"}}),(0,n.jsxs)(j.zx,{onClick:()=>e.onNavigate("TODAY"),variant:"outline",flexGrow:{base:1,sm:"initial"},isActive:g(e.date),children:[(0,n.jsx)(y.di,{below:"sm",children:e.label}),(0,n.jsx)(y.di,{above:"sm",children:"Today"})]}),(0,n.jsx)(j.hU,{flexGrow:{base:1,sm:"initial"},onClick:()=>e.onNavigate("NEXT"),icon:(0,n.jsx)(w.mr,{}),"aria-label":"Next",variant:"outline"})]}),(0,n.jsx)(y.di,{above:"sm",children:(0,n.jsx)(i.LZ,{})}),(0,n.jsx)(y.di,{above:"sm",children:(0,n.jsx)(i.M5,{children:(0,n.jsx)(i.xv,{children:e.label})})}),(0,n.jsxs)(y.di,{above:"sm",children:[(0,n.jsx)(i.LZ,{}),(0,n.jsxs)(j.hE,{isAttached:!0,pb:3,pt:3,children:[(0,n.jsx)(j.zx,{onClick:()=>e.onView("day"),variant:"outline",isActive:"day"===e.view,children:"Day"}),(0,n.jsx)(j.zx,{onClick:()=>e.onView("week"),variant:"outline",isActive:"week"===e.view,children:"Week"}),(0,n.jsx)(y.di,{above:"md",children:(0,n.jsx)(j.zx,{onClick:()=>e.onView("month"),variant:"outline",isActive:"month"===e.view,children:"Month"})})]})]})]});var k=a(7751),p=a(34619),D=a(85536),O=a(3607),C=a(44937);function _(){let[e,t]=(0,x.useState)(null),a=(0,v.useRxCollection)("item"),[u,w]=(0,x.useState)("day"),[j,y]=(0,x.useState)({start:h()().startOf("day").toDate(),end:h()().endOf("day").toDate()}),[g,_]=(0,x.useState)([]),[E,S]=(0,x.useState)(null),L=(0,v.useRxQuery)(null==a?void 0:a.find({selector:{type:D.O.log,date:{$lt:j.end.toISOString(),$gt:j.start.toISOString()}}}));function N(e,t){return"".concat(C.o.format((null!=e?e:0)/100)," | ").concat(t.energyKilocalories,"kcal | ").concat(t.massGrams,"g mass | ").concat(t.fatGrams,"g fat | ").concat(t.carbohydrateGrams,"g carbs | ").concat(t.proteinGrams,"g protein")}function A(e){let t=(0,p.fC)(e),a=(0,p.k3)(e);return N(a,t)}(0,x.useEffect)(()=>{!async function(){for(var e=[],t=j.start;t<=j.end;)e.push(t),t=h()(t).add(1,"day").toDate();let a=await (0,O.ig)(L.result),n=a.map(e=>({title:A(e),start:new Date(e.date),end:new Date(new Date(e.date).getTime()+36e5),allDay:!1,resource:e}));for(let i of e){let s=a.filter(e=>h()(i).isSame(h()(e.date),"day")),l=(0,p.p6)(s.map(e=>(0,p.fC)(e))),r=s.reduce((e,t)=>{var a;return e+(null!==(a=(0,p.k3)(t))&&void 0!==a?a:0)},0);n.push({title:N(r,l),start:i,end:h()(i).add(1,"hour").toDate(),allDay:!0,resource:l})}_(n)}()},[L.result,a,j]);let R=(0,m.iP)();R.width<480?"day"!==u&&w("day"):R.width<768&&"month"===u&&w("week");let Z={"en-US":o.Z},G=(0,f.lD)({format:l.Z,parse:d.Z,startOfWeek:c.Z,getDay:r.Z,locales:Z});return(0,n.jsxs)(x.Fragment,{children:[(0,n.jsx)(i.xu,{height:"calc(100vh - 76px)",overflow:"scroll",px:3,children:(0,n.jsx)(f.f,{view:u,onView(e){w(e)},selectable:!0,localizer:G,onRangeChange(e){e.start&&e.end&&y({start:e.start,end:e.end})},onNavigate(e,t){"day"===t?y({start:h()(e).startOf("day").toDate(),end:h()(e).endOf("day").toDate()}):"week"===t&&y({start:h()(e).startOf("isoWeek").subtract(1,"day").toDate(),end:h()(e).endOf("isoWeek").subtract(1,"day").toDate()})},formats:{dayHeaderFormat:"eee LLL d",dayRangeHeaderFormat:(e,t,a)=>"".concat(null==a?void 0:a.format(e.start,"LLL d",t),"-").concat(null==a?void 0:a.format(e.end,"LLL d",t))},async onDoubleClickEvent(e){var n;t(null!==(n=await (null==a?void 0:a.findOne(e.resource.id).exec()))&&void 0!==n?n:null)},onSelectEvent(e){S(e)},events:g,views:{day:!0,month:!0,week:!0},startAccessor:"start",endAccessor:"end",components:{toolbar:b}})}),(0,n.jsx)(k.R,{isOpen:null!==e,async onResult(a){a&&(null==e||e.remove()),t(null)}}),(0,n.jsxs)(s.u_,{isOpen:null!==E,onClose:()=>S(null),isCentered:!0,children:[(0,n.jsx)(s.ZA,{}),(0,n.jsxs)(s.hz,{children:[(0,n.jsx)(s.ol,{}),(0,n.jsx)(s.fe,{children:(null==E?void 0:E.resource)&&A(E.resource)})]})]})]})}}},function(e){e.O(0,[869,961,774,888,179],function(){return e(e.s=49536)}),_N_E=e.O()}]);